<%- include ("partials/header") -%>
	<script>
		document.getElementById("menu").classList.add("blackMenu");
		var pot = <%-JSON.stringify(pot)%>;
		console.log(pot)
	</script>
	<div class="section potHome" data-name="about">
		<div class="image" id="pot-image"></div>
		<div class="image" id="pot-image-phone"></div>
	</div>
	<script>
		document.getElementById("pot-image").setAttribute("style","background-position:"+pot.background+";background-image:url(/pots/"+pot.type+"/Naslovna.jpg")
		document.getElementById("pot-image-phone").setAttribute("style","background-position:"+pot.background+";background-image:url(/pots/"+pot.type+"/Naslovna-Mobilni.jpg")
	</script>
	<div class="section pot">
		<div class="buttonsWrap" id="product-buttons"></div>
		<script>
			for(var i=0;i<pot.items.length;i++){
				var button = document.createElement("DIV");
				button.setAttribute("class","button");
				if(i==0){
					button.classList.add("buttonActive");
				}
				button.setAttribute("onclick","productIndexedPick(this)");
				button.innerHTML = pot.items[i].name.replace(/-/," ");
				document.getElementById("product-buttons").appendChild(button); 
			}

			function productIndexedPick(elem){
				var elements	=	elem.parentElement.getElementsByClassName(elem.classList[0]);
				var index 		=	-1;
				for(var i=0;i<elements.length;i++){
					elements[i].classList.remove(elem.classList[0]+"Active");
					if(elem==elements[i]){
						index = i;
						elements[i].classList.add(elem.classList[0]+"Active");
					}
				}
				if(index>=0){
					document.getElementById("slides").style.left=eval(index*100*-1)+"vw";
					var dots = document.getElementById("dots").getElementsByClassName("dot");
					for(var i=0;i<dots.length;i++){
						dots[i].classList.remove("dotActive");
						if(i==index){
							dots[i].classList.add("dotActive")
						}
					}
					if(index==0){
						document.getElementById("left-arrow").style.opacity=0;
						document.getElementById("right-arrow").style.opacity=1;
					}else if(index==elements.length-1){
						document.getElementById("right-arrow").style.opacity=0;
						document.getElementById("left-arrow").style.opacity=1;
					}else{
						document.getElementById("left-arrow").style.opacity=1;
						document.getElementById("right-arrow").style.opacity=1;
					}
				}

			}
		</script>
		<div class="product">
			<img src="/images/man.jpg" class="manImage">
			<div class="slides" id="slides"></div>
			<script>
				for(var i=0;i<pot.items.length;i++){
					var slide = document.createElement("DIV");
					slide.setAttribute("class","slide");
						var image = document.createElement("DIV");
						image.setAttribute("class","image");
							var img = document.createElement("IMG");
							img.setAttribute("src","/pots/"+pot.type+"/"+pot.items[i].name+".PNG");
							image.appendChild(img)
						slide.appendChild(image);

						var textWrap = document.createElement("DIV");
						textWrap.setAttribute("class","textWrap");
							var item = document.createElement("DIV");
							item.setAttribute("class","title");
							item.innerHTML = pot.items[i].name.replace(/-/," ");
							textWrap.appendChild(item);

							var item = document.createElement("DIV");
							item.setAttribute("class","subTitle");
							item.innerHTML = pot.items[i].type;
							textWrap.appendChild(item);

							var item = document.createElement("DIV");
							item.setAttribute("class","subTitle");
							item.innerHTML = "&euro;"+pot.items[i].vatprice+" (&euro;"+pot.items[i].price+" <span class=\"small\">excl. VAT - prices from stock</span>)";
							textWrap.appendChild(item);

							var item = document.createElement("DIV");
							item.setAttribute("class","spacer");
							textWrap.appendChild(item);

							var item = document.createElement("DIV");
							item.setAttribute("class","text");
							item.innerHTML	=	"dimension";
							textWrap.appendChild(item);

							var item = document.createElement("DIV");
							item.setAttribute("class","text");
							item.innerHTML	=	pot.items[i].dimension;
							textWrap.appendChild(item);

							var item = document.createElement("DIV");
							item.setAttribute("class","smallestSpacer");
							textWrap.appendChild(item);

							var attributes = Object.keys(pot.items[i].attributes);
							for(var j=0;j<attributes.length;j++){
								var item = document.createElement("DIV");
								item.setAttribute("class","text");
								item.innerHTML = "<span class=\"bold\">"+attributes[j]+"</span> " + pot.items[i].attributes[attributes[j]];
								textWrap.appendChild(item);
							}

							var item = document.createElement("DIV");
							item.setAttribute("class","smallSpacer");
							textWrap.appendChild(item);

							var item = document.createElement("DIV");
							item.setAttribute("class","smallText");
							item.innerHTML = "Handmade in Belgrade";
							textWrap.appendChild(item);

						slide.appendChild(textWrap);
					document.getElementById("slides").appendChild(slide);
				}
			</script>
			<div class="dots" id="dots"></div>
			<div class="arrow arrowLeft" id="left-arrow" style="opacity:0" onclick="productSlide(-1)">
				<img src="/icons/leftArrow-Grey.svg" width="40">
			</div>
			<div class="arrow arrowRight" id="right-arrow" onclick="productSlide(1)">
				<img src="/icons/rightArrow-Grey.svg" width="40">
			</div>
			<script>
				var numberOfDots	=	document.getElementById("slides").getElementsByClassName("slide").length;
				for(var i=0;i<numberOfDots;i++){
					var dot = document.createElement("DIV");
					dot.setAttribute("class","dot");
					if(i==0){
						dot.classList.add("dotActive")
					}
					document.getElementById("dots").appendChild(dot)
				}

				function productSlide(direction){
					//figure out active index
					var dots = document.getElementById("dots").getElementsByClassName("dot");
					var index = -1;
					for(var i=0;i<dots.length;i++){
						if(dots[i].classList.contains("dotActive")){
							index = i;
							break
						}
					}
					if(index>=0){
						var nextElemIndex = index + direction;
						if(nextElemIndex>=0 && nextElemIndex<=dots.length-1){
							productIndexedPick(document.getElementById("product-buttons").getElementsByClassName("button")[nextElemIndex])
						}
					}
				}
			</script>
		</div>
	</div>
<%- include ("partials/footer") -%>